# 计算机组成原理

![](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220222133122609.png)

## 计算机概要与技术

![image-20220301140328819](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301140328819.png)



CPI：平均指令数

![image-20220301141049961](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301141049961.png)

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301141502184.png" alt="image-20220301141502184" style="zoom:80%;" />

------

#### 功耗墙

![image-20220301142836556](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301142836556.png)

==功耗=负载电容 * 电压² * 开关频率==

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301143257627.png" alt="image-20220301143257627" style="zoom:80%;" />

#### 系统软件

![image-20220301144633663](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301144633663.png)



## 计算机指令

![image-20220301145229300](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301145229300.png)

高级语言、汇编语言、机器语言

![image-20220301145300834](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301145300834.png)

### 指令和指令系统

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301145438714.png" alt="image-20220301145438714" style="zoom:80%;" />

计算机语言中的基本单词称为指令，一台计算机的全部指令称为该计算机的指令集。

**指令集**：

一个给定的计算机体系结构所包含的指令集合。

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301145639540.png" alt="image-20220301145639540" style="zoom:80%;" />

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301145654146.png" alt="image-20220301145654146" style="zoom:80%;" />

### MIPS指令系统

**存储程序概念**：

多种类型的指令和数据均以数字形式存储与存储器中的概念。

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220301150925450.png" alt="image-20220301150925450" style="zoom:80%;" />

总体情况：

由32个寄存器和$2^{30}$个存储器字组成；

寄存器用于数据的快速存取。在MIPS中，只能对存放在寄存器中的数据执行算术操作，寄存器\$zero的值恒威0，寄存器\$at被汇编器保留，用于处理大常数；

寄存器：$\$s0-\$s7,\$t0-\$t9,\$zero,\$a0-\$a3,\$v0-\$v1,\$gp,\$fp,\$sp,\$ra,\$at$

存储器只能通过数据传输指令访问，MIPS使用字节编址，所以**连续的字地址相差4**，存储器用于保存数据结构、数组和溢出的寄存器。

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220308134034393.png" alt="image-20220308134034393" style="zoom:80%;" />

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430144153257.png" alt="image-20220430144153257" style="zoom:80%;" />

![image-20220430144305406](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430144305406.png)

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430144351599.png" alt="image-20220430144351599" style="zoom:80%;" />

![image-20220430144415411](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430144415411.png)

![image-20220430144443954](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430144443954.png)

![image-20220430144505242](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430144505242.png)

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430144532158.png" alt="image-20220430144532158" style="zoom:80%;" />

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430144549351.png" alt="image-20220430144549351" style="zoom:80%;" />

==Syscall的作用==

![image-20220430145028432](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430145028432.png)

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430150116606.png" alt="image-20220430150116606" style="zoom:80%;" />

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430150222695.png" alt="image-20220430150222695" style="zoom:80%;" />

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430150312890.png" alt="image-20220430150312890" style="zoom:80%;" />

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430150327267.png" alt="image-20220430150327267" style="zoom:80%;" />

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430150441736.png" alt="image-20220430150441736" style="zoom:80%;" />

相邻存储器字地址差4，所以要乘4

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430150708909.png" alt="image-20220430150708909" style="zoom:80%;" />

![image-20220430150913665](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430150913665.png)



<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220308140853325.png" alt="image-20220308140853325" style="zoom:80%;" />

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430151053941.png" alt="image-20220430151053941" style="zoom:80%;" />

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220308141033110.png" alt="image-20220308141033110" style="zoom:80%;" />

0:操作码，结合末尾编码确认到底是什么运算

汇编语言和机器指令不一致；

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220308141254185.png" alt="image-20220308141254185" style="zoom:80%;" />

![image-20220308141403253](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220308141403253.png)

#### MIPS指令格式

![image-20220308141529482](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220308141529482.png)

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220308141720903.png" alt="image-20220308141720903" style="zoom:80%;" />

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220308143012205.png" alt="image-20220308143012205" style="zoom:80%;" />

![image-20220308144005117](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220308144005117.png)

#### 逻辑操作

![image-20220430151836370](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430151836370.png)

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430151938981.png" alt="image-20220430151938981" style="zoom:80%;" />

**逻辑左移**$i$位相当于乘$2^i$

#### 决策指令

<img src="C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430152141802.png" alt="image-20220430152141802" style="zoom:80%;" />

![image-20220430152228628](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430152228628.png)

![image-20220430155545119](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430155545119.png)

![image-20220430155606902](C:\Users\123\AppData\Roaming\Typora\typora-user-images\image-20220430155606902.png)































## 计算机的算数运算







## 处理器



## 存储器



cache

![image-20220524141235572](https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202205241412884.png)

offset:块的大小决定

index：行号决定

剩下的是tag位



虚拟地址

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071338676.png" alt="image-20220607133839383" style="zoom:67%;" />

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071341283.png" alt="image-20220607134112089" style="zoom:67%;" />

（2）主存：

最低表示块内地址：32B -> 2的5次方，5位，还剩15位

中间表示cache行编号 -> 2的3次方，3位

最高的是标记位，12位

（3）把虚页号变成物理页号

001C60H

0000 0000 0001 | 1100 0110 0000

前12位虚页号，后面是页内

找页表内容，虚页号1，有效位是1，说明页命中，在主存中；物理页号为04+业内部分得到物理地址

物理地址：0000 0100 1100 0110 0000

对物理地址进行分析：

0000 0100 1100 | 011 | 00000

在011->第3行，有效位是1，但是标记为105，cache没命中

## 期中考试试题

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071350109.png" alt="image-20220607135016860" style="zoom:67%;" />

1.运算器、控制器和cache（存储器）

2.运算器、控制器、存储器、输入设备、输出设备

3.比特；$2^{13}$($8*2^{10}$)

4.DFDE

0010 0000 0010 0010

补码：1101 1111 1101 1110

5.CB8

6.$2^8-1$=255

7.$-2^{15},2^{15}-1$

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071357219.png" alt="image-20220607135725968" style="zoom:67%;" />

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071403051.png" alt="image-20220607140342857" style="zoom:67%;" />

8.32769

-32767原码：1 111 1111 1111 1111

补码为：1000 0000 0000 0001

9.压栈和出栈；(32位-->4个字节，压栈地址减少)

12345674H;12345678cH

10.x=-33,y=65,x-y=9E H

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071405337.png" alt="image-20220607140504071" style="zoom:67%;" />

11.低位：0x11，c的地址为0xC00E

首地址是C008,int占32位，4个字节，char占1个字节，按边界对齐，紧挨的字节不能放，隔一个放short

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071409121.png" alt="image-20220607140949889" style="zoom:80%;" />

小端方式：数据低位放在内存低位；

边界对齐：占用的字节数必须是$2^k$个，k>0；

12.00101011

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071413649.png" alt="image-20220607141356403" style="zoom:67%;" />

13.$8.25=2^3+2^{-2}$

写成二进制1000.01

规格化：进行移位

1.00001*$2^3$,1省略，00001尾数，3为阶，3+127=130，130是阶码对应的10进制数

完整编码：C1040000

14.见课件

15.编译

16.R,I,J

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071430474.png" alt="image-20220607143022305" style="zoom:67%;" />

17.Jal ，jr

18.复杂指令集（CISC），精简指令集（RISC）

19.PC相对寻址；J

20.取完变成2002（16位，两个字节），答案为2008H

21.90ns（取最大的）

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071438803.png" alt="image-20220607143857686" style="zoom:67%;" />

22.乘法

往右移位，对应乘法运算

23.二进制：0  011 1111 1 | 100 0000 0000 0000 0000 0000

尾数真值：0.5  阶码真值：减去127，为0，符号为正

24.

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071444671.png" alt="image-20220607144415558" style="zoom:67%;" />

25.Zero； 与

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071445739.png" alt="image-20220607144518618" style="zoom:67%;" />

漏条件：A和B内部逻辑电路完全一样，影响第三题的解答

1. 1/8MHz=0.125us
2. 每秒有8M个周期，执行0.4MIPS，平均指令周期=0.4/8
3. A和B内部逻辑电路完全一样，预示着平均指令周期数一样

2.课上原题，回顾，QAQ难啊

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071449218.png" alt="image-20220607144923018" style="zoom:67%;" />

3.

（1）

-513-->补码：1111 1101 1111 ，左移，1111 1011 1110

（2）

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202206071455695.png" alt="image-20220607145543562" style="zoom:80%;" />

加上装满的周期
